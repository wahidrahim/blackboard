// Generated by CoffeeScript 1.10.0
var canvas, states;

canvas = new fabric.Canvas('canvas', {
  backgroundColor: '#222',
  width: 1152,
  height: 720,
  isDrawingMode: true
});

states = [canvas.toJSON()];

canvas.on('path:created', function(e) {
  return states.push(canvas.toJSON());
});

$('#undo').click(function(e) {
  if (states.length > 1) {
    states.pop();
    return canvas.loadFromJSON(states[states.length - 1]);
  }
});

$('#color').change(function(e) {
  var val;
  val = $('#color').val();
  canvas.freeDrawingBrush.color = val;
  return $('#brush-style').css({
    'background': val
  });
});

$('#width').on('input', function(e) {
  var val;
  val = $('#width').val();
  canvas.freeDrawingBrush.width = val;
  $('#widthField').val(val);
  return $('#brush-style').css({
    'height': val,
    'width': val
  });
});

$('#color').change();

$('#width').trigger('input');
